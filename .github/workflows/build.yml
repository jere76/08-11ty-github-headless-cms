name: 11ty build
on: [push]
jobs:
	build_deploy:
	 runs-on: self-hosted
	 steps:
	 - name: Checkout last commit of repository
	 uses: actions/checkout@v3
	 - name: Install dependencies
		 run: npm install
	 - name: Install 11ty and build website
	 uses: extrawitz/11ty-dockerless-build@v1
	 - name: Deploy
	 uses: peaceiris/actions-gh-pages@v3
	 with:
	  publish_dir: ./www
	  publish_branch: website
	  github_token: ${{ secrets.PSA }}